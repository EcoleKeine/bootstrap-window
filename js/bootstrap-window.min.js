/*! bootstrap-window 0.0.8 2013-10-29 */
var Window=null;!function(a){"use strict";Window=function(a){var b=this;return a=a||{},b.title=a.title||"No Title",b.bodyContent=a.bodyContent||"",b.footerContent=a.footerContent||"",this.options=a,this.initialize(),this},Window.prototype.initialize=function(){if(!this.options.template)throw new Error("No template specified for window.");this.$el=a(this.options.template),this.$el.find(".window-title").html(this.title),this.$el.find(".window-body").html(this.bodyContent),this.$el.find(".window-footer").html(this.footerContent),this.$el.hide(),this.$el.appendTo("body"),this.options.sticky?(this.$el.css("left",a(window).width()/2-this.$el.width()/2),this.$el.css("top",a(window).height()/2-this.$el.height()/2)):(this.$el.css("left",a(window).width()/2-this.$el.width()/2),this.$el.css("top",a(window).height()/2-this.$el.height()/2)),this.initHandlers(),this.$el.fadeIn(),this.id=this.options.id?this.options.id:"",this.setSticky(this.options.sticky)},Window.prototype.close=function(){var a=this;this.$el.trigger("close"),this.$el.fadeOut(400,function(){a.$el.remove()}),this.$windowTab&&this.$windowTab.fadeOut(400,function(){a.$windowTab.remove()})},Window.prototype.setActive=function(a){a?(this.$el.addClass("active"),this.$windowTab&&this.$windowTab.addClass("label-primary")):(this.$el.removeClass("active"),this.$windowTab&&(this.$windowTab.removeClass("label-primary"),this.$windowTab.addClass("label-default")))},Window.prototype.setIndex=function(a){this.$el.css("zIndex",a)},Window.prototype.setWindowTab=function(a){this.$windowTab=a},Window.prototype.getWindowTab=function(){return this.$windowTab},Window.prototype.getTitle=function(){return this.title},Window.prototype.getElement=function(){return this.$el},Window.prototype.setSticky=function(a){this.sticky=a,a===!1?this.$el.css({position:"absolute"}):this.$el.css({position:"fixed"})},Window.prototype.getSticky=function(){return this.sticky},Window.prototype.initHandlers=function(){var b=this;this.$el.find("[data-dismiss=window]").on("click",function(){b.close()}),this.$el.off("mousedown"),this.$el.on("mousedown",function(){b.$el.trigger("focused")}),this.$el.find(".window-header").off("mousedown"),this.$el.find(".window-header").on("mousedown",function(c){b.moving=!0,b.offset={},b.offset.x=c.pageX-b.$el.position().left,b.offset.y=c.pageY-b.$el.position().top,a("body > *").addClass("disable-select")}),this.$el.find(".window-header").on("mouseup",function(){b.moving=!1,a("body > *").removeClass("disable-select")}),a("body").on("mousemove",function(a){b.moving&&(b.$el.find(".window-header").position().top,b.$el.find(".window-header").position().left,b.$el.css("top",a.pageY-b.offset.y),b.$el.css("left",a.pageX-b.offset.x))})}}(jQuery);var WindowManager=null;!function(a){"use strict";WindowManager=function(a){return this.windows=[],a=a||{},this.initialize(a),this},WindowManager.prototype.findWindowByID=function(b){var c=null;return a.each(this.windows,function(a,d){console.log(arguments),d.id===b&&(c=d)}),c},WindowManager.prototype.destroyWindow=function(b){var c=this;a.each(this.windows,function(a,d){d===b&&(c.windows.splice(a,1),c.resortWindows())})},WindowManager.prototype.resortWindows=function(){var b=900;a.each(this.windows,function(a,c){c.setIndex(b+a)})},WindowManager.prototype.setFocused=function(b){var c;a.each(this.windows,function(a,d){d.setActive(!1),d===b&&(c=a)}),this.windows.push(this.windows.splice(c,1)[0]),this.resortWindows(),b.setActive(!0)},WindowManager.prototype.initialize=function(b){this.options=b,this.options.container&&a(this.options.container).addClass("window-pane")},WindowManager.prototype.createWindow=function(b){var c=this,d=Object.create(b);this.options.windowTemplate&&!d.template&&(d.template=this.options.windowTemplate);var e=new Window(d);return e.getElement().on("focused",function(){c.setFocused(e)}),e.getElement().on("close",function(){c.destroyWindow(e),e.getWindowTab()&&e.getWindowTab().remove()}),this.options.container&&(e.setWindowTab(a('<span class="label label-default">'+e.getTitle()+'<button class="close">x</button></span>')),e.getWindowTab().find(".close").on("click",function(){e.close()}),e.getWindowTab().on("click",function(){c.setFocused(e),e.getSticky()&&window.scrollTo(0,e.getElement().position().top)}),a(this.options.container).append(e.getWindowTab())),this.windows.push(e),this.setFocused(e),e}}(jQuery);